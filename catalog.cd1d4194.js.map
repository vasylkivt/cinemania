{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-47c3ef64e3893fc3.js","src/js/pages/catalog/hero.js","src/js/components/rating-stars.js","node_modules/@parcel/runtime-js/lib/runtime-d0cdfc4165f8444a.js","src/js/components/loader.js","src/js/pages/catalog/catalog.js","node_modules/@parcel/runtime-js/lib/runtime-033e13dd004b2d75.js","src/js/components/movie-list.js","src/js/components/error-message-search.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"gin8l\\\":\\\"catalog.cd1d4194.js\\\",\\\"gVEw5\\\":\\\"default_horizontal_poster_path.736ae198.jpg\\\",\\\"aI1lb\\\":\\\"default-image-for-movie.30fb3bbd.webp\\\",\\\"7mVsD\\\":\\\"catalog.ba862f98.css\\\",\\\"30zUr\\\":\\\"catalog.1d9163ce.js\\\"}\"));","import { ratingStarsMarkup } from '../../components/rating-stars';\nimport defaultImg from '../../../images/default_horizontal_poster_path.jpg';\nimport { Loader } from '../../components/loader';\nimport { TMDB_API } from '../../api/themoviedbAPI';\n\nimport { addEventListenerByOpenTrailer } from '../../services/open-movie-trailer';\n\n// import '~/node_modules/swiper/swiper-bundle.min.js';\n// import Swiper from 'swiper';\n\nconst themoviedbAPI = new TMDB_API();\n\nconst getTrendMovieOfDay = async () => {\n  try {\n    Loader.onShow();\n    const { results } = await themoviedbAPI.getTrendMovieByParam('day');\n    const correctList = results.slice(0, 5);\n\n    document.querySelector('.js-hero-wrapper').innerHTML =\n      createMarkupMovieList(correctList);\n    addEventListenerByOpenTrailer();\n\n    const progressCircle = document.querySelector('.autoplay-progress svg');\n    const progressContent = document.querySelector('.autoplay-progress span');\n\n    new Swiper(\n      '.js-hero-wrapper',\n      swiperOption(progressCircle, progressContent)\n    );\n  } catch (error) {\n    console.log('error:', error);\n  }\n  Loader.onClose();\n};\n\ngetTrendMovieOfDay();\n\nconst swiperOption = (progressCircle, progressContent) => ({\n  effect: 'cube',\n  loop: true,\n  keyboard: {\n    enabled: true,\n  },\n  autoplay: {\n    delay: 5000,\n    disableOnInteraction: false,\n    pauseOnMouseEnter: true,\n  },\n  on: {\n    autoplayTimeLeft(s, time, progress) {\n      progressCircle.style.setProperty('--progress', 1 - progress);\n      progressContent.textContent = `${Math.ceil(time / 1000)}s`;\n    },\n  },\n  grabCursor: true,\n  cubeEffect: {\n    shadow: true,\n    slideShadows: true,\n    shadowOffset: 20,\n    shadowScale: 0.94,\n  },\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n  },\n});\n\nconst createMarkupMovieList = movies => `\n\n      <div class=\"swiper-wrapper\">\n        ${movies.map(movie => createMarkupMovieItem(movie)).join('')}\n      </div>\n      <div class=\"swiper-pagination\"></div>\n      <div class=\"autoplay-progress\">\n      <svg viewBox=\"0 0 48 48\">\n        <circle cx=\"24\" cy=\"24\" r=\"20\"></circle>\n      </svg>\n      <span></span>\n    </div>\n    `;\n\nconst createMarkupMovieItem = ({\n  id,\n  backdrop_path,\n  original_title,\n  overview,\n  vote_average,\n}) => `\n    <div class=\"swiper-slide\">\n\n        <img class=\"hero-background-img\n        ${getBgImg(backdrop_path, backdrop_path, original_title)}/>\n      \n      <div class=\"container\">\n        <div class=\"hero-text-wrap\">\n          <h1 class=\" hero-title\">${original_title}</h1>\n          <div class=\"hero-movie-rating\">\n            ${ratingStarsMarkup(vote_average * 10)}\n          </div>\n          <p class=\" hero-text\">${overview}</p>\n        </div>\n\n        <div class=\"hero-button-wrap\">\n        <button data-movie_id_for_trailer=${id}\n            type=\"button\" class=\"js-button-show-trailer button-accent\">\n              Watch trailer\n          </button>\n          <button data-movie_id_for_modal=${id}\n            type=\"button\" class=\"button-light-theme\">\n              More details\n          </button>\n        </div>\n\n      </div>\n    </div>`;\n\nfunction getBgImg(backdropPoster, title) {\n  if (backdropPoster === null || !backdropPoster) {\n    return `src='${defaultImg}' alt='${title}'`;\n  }\n\n  return ` srcset=\"\n          https://image.tmdb.org/t/p/w1280${backdropPoster} 1280w,\n          https://image.tmdb.org/t/p/w780${backdropPoster}  280w\n        \"\n        src=\"https://image.tmdb.org/t/p/original${backdropPoster}\"\n        sizes=\" (min-width: 768px) 704px, (min-width: 320px) 280px, 100vw\"\n        alt=\"${title}\"`;\n}\n","export const ratingStarsMarkup = rating => {\n  return `\n  <div class=\"rating-container\">\n    <div class=\"star-empty\"></div>\n    <div style=\" width:${rating}%;\"  class=\"star-full\"></div>\n  </div>`;\n};\n","module.exports = require('./helpers/bundle-url').getBundleURL('gin8l') + require('./helpers/bundle-manifest').resolve(\"gVEw5\");","const onShow = () => {\n  document.body.insertAdjacentHTML(\n    'beforeend',\n    `<div class=\"backdrop-loader\">\n  <div class=\"lds-dual-ring\"></div>\n</div>`\n  );\n};\n\nconst onClose = () => {\n  document.querySelector('.backdrop-loader').remove();\n};\n\nexport const Loader = { onShow, onClose };\n","import { TMDB_API, TMDB_APIi } from '../../api/themoviedbAPI';\nimport { markupBtnLoadMore } from '../../components/button-load-more';\nimport { markupErrorMessageSearch } from '../../components/error-message-search';\nimport { Loader } from '../../components/loader';\nimport { markupPagination } from '../../components/markup-pagimation';\nimport { createMarkupMovieList } from '../../components/movie-list';\n\nconst themoviedbAPI = new TMDB_API();\n\nconst catalogMovieList = document.querySelector('.js-catalog-movie-list');\nconst formButtonClose = document.querySelector(\n  '.js-catalog-search-form-button-close'\n);\n\ngetMovieList('week-movies');\n\nasync function getMovieList(action) {\n  try {\n    Loader.onShow();\n\n    if (action === 'week-movies') {\n      const response = await themoviedbAPI.getTrendMovieByParam('week');\n      const genresList = await themoviedbAPI.getGenresList();\n      updateGallery(response, genresList);\n    } else if (action === 'query-movies') {\n      const response = await themoviedbAPI.searchMovieByQuery();\n      const genresList = await themoviedbAPI.getGenresList();\n      updateGallery(response, genresList);\n    }\n  } catch (error) {\n    console.log('Error:', error);\n  }\n  Loader.onClose();\n}\n\nconst updateGallery = (response, genresList) => {\n  const { results, page: currentPage, total_pages, total_results } = response;\n\n  const catalogPaginationEl = document.querySelector('.js-catalog-pagination');\n\n  if (results.length === 0) {\n    catalogPaginationEl.innerHTML = '';\n    catalogMovieList.innerHTML = markupErrorMessageSearch();\n    return;\n  }\n\n  if (currentPage < total_pages) {\n    catalogPaginationEl.innerHTML = markupBtnLoadMore() + markupPagination();\n    document\n      .querySelector('.js-load-more')\n      .addEventListener('click', handlerLoadMoreClick);\n  } else {\n    catalogPaginationEl.innerHTML = '';\n  }\n\n  if (themoviedbAPI.page === 1) catalogMovieList.innerHTML = '';\n\n  catalogMovieList.insertAdjacentHTML(\n    'beforeend',\n    createMarkupMovieList(results, genresList)\n  );\n};\n\nconst formEl = document.querySelector('.js-catalog-search-form');\nconst { query, queryText, select } = formEl.elements;\n\nquery.addEventListener('input', () => {\n  formButtonClose.classList.remove('is-hidden');\n  queryText.placeholder = query.value;\n  if (query.value === '') formButtonClose.classList.add('is-hidden');\n});\n\nformButtonClose.addEventListener('click', () => {\n  formButtonClose.classList.add('is-hidden');\n  query.value = '';\n  queryText.placeholder = 'Film';\n});\n\nformEl.addEventListener('submit', handlerSubmit);\n\nfunction handlerSubmit(e) {\n  e.preventDefault();\n  themoviedbAPI.page = 1;\n\n  if (\n    themoviedbAPI.query === query.value &&\n    themoviedbAPI.year === select.value\n  )\n    return;\n\n  if (query.value.trim() === '') return;\n  if (select.value !== '') themoviedbAPI.year = select.value;\n\n  themoviedbAPI.query = query.value;\n\n  getMovieList('query-movies');\n}\n\nfunction handlerLoadMoreClick() {\n  themoviedbAPI.page += 1;\n  if (themoviedbAPI.query === '') {\n    getMovieList('week-movies');\n  } else {\n    getMovieList('query-movies');\n  }\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('gin8l') + require('./helpers/bundle-manifest').resolve(\"aI1lb\");","import comingSoonImg from '../../images/default-image-for-movie.webp';\nimport { ratingStarsMarkup } from './rating-stars';\n\nexport const createMarkupMovieList = (movieList, genresList) =>\n  movieList\n    .map(\n      ({\n        id,\n        poster_path,\n        genre_ids,\n        original_title,\n        release_date,\n        vote_average,\n      }) => `\n        <li data-movie_id_for_modal=\"${id}\" class=\"movie-card\">\n          <img\n          ${getImg(poster_path, original_title)}\n          class=\"movie-card-img\"\n          width=\"280\"\n          height=\"406\"\n          />\n          <div class=\"movie-card-wrapper\">\n              <h2 class=\"movie-card-title\">${original_title}</h2>\n              <p class=\"movie-card-text\">\n                ${getGenre(genre_ids, genresList)} | ${release_date.slice(0, 4)}\n              </p>\n              <div class=\"movie-card-rating\">\n              ${ratingStarsMarkup(vote_average * 10)}\n              </div>\n          </div>\n        </li>\n       `\n    )\n    .join('');\n\nfunction getGenre(genreIds, genresList) {\n  let genre = '';\n  if (genreIds?.length === 0) {\n    genre = 'Unknown Genre';\n  } else if (genreIds) {\n    genre = getGenreName(genreIds, genresList).slice(0, 1).join(' ');\n  }\n\n  return genre;\n}\n\nfunction getGenreName(ids, genresList) {\n  try {\n    return ids.map(id => {\n      const genre = genresList.find(genre => genre.id === id);\n      return genre ? genre.name : null;\n    });\n  } catch (error) {\n    return ['Unknown Genre'];\n  }\n}\n\nfunction getImg(poster, title) {\n  if (poster === null || !poster) {\n    return `src='${comingSoonImg}' alt='${title}'`;\n  }\n\n  return `\n    srcset=\"\n    https://image.tmdb.org/t/p/w300/${poster} 342w,\n    https://image.tmdb.org/t/p/w500/${poster} 500w\n            \"\n       src=\"https://image.tmdb.org/t/p/w500/${poster}\"\n     sizes=\"(min-width: 768px) 500px, (min-width: 480px) 342px, (min-width: 320px) 185px, 100vw\"   \n     alt='${title}'`;\n}\n","export const markupErrorMessageSearch = () =>\n  `\n    <p class=\"catalog-message\">\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>We donâ€™t have any results matching your search.</span>\n    </p >\n    `;\n"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$d8a87f2cdc1997bd$export$1b12aeaaf8caa4ab","rating","concat","$018f6c638d807d5d$exports","getBundleURL","resolve","$db576fa6837b6c10$export$3b0d6d7590275603","onShow","document","body","insertAdjacentHTML","onClose","querySelector","remove","$53267ae005055d71$var$themoviedbAPI","$lpiv7","TMDB_API","$53267ae005055d71$var$getTrendMovieOfDay","$parcel$interopDefault","$2TvXO","mark","_callee","results","correctList","progressCircle","progressContent","getTrendMovieByParam","_ctx","sent","slice","innerHTML","$53267ae005055d71$var$createMarkupMovieList","$gYAW9","addEventListenerByOpenTrailer","Swiper","$53267ae005055d71$var$swiperOption","console","log","t0","effect","loop","keyboard","enabled","autoplay","delay","disableOnInteraction","pauseOnMouseEnter","on","autoplayTimeLeft","s","time","progress","style","setProperty","textContent","Math","ceil","grabCursor","cubeEffect","shadow","slideShadows","shadowOffset","shadowScale","pagination","el","clickable","movies","map","movie","$53267ae005055d71$var$createMarkupMovieItem","join","param","backdropPoster","title","id","backdrop_path","original_title","overview","vote_average","$51f5b8a6b3db4913$exports","$ef2be68b84ad4c0a$export$948bae64fe35076f","movieList","genresList","poster","poster_path","genre_ids","release_date","genreIds","genre","length","ids","genre1","find","name","error","$ef2be68b84ad4c0a$var$getGenreName","$ef2be68b84ad4c0a$var$getGenre","$3b333e1d9ec2dbed$var$themoviedbAPI","$3b333e1d9ec2dbed$var$catalogMovieList","$3b333e1d9ec2dbed$var$formButtonClose","$3b333e1d9ec2dbed$var$getMovieList","action","$3b333e1d9ec2dbed$var$_getMovieList","apply","this","arguments","response","response1","genresList1","getGenresList","$3b333e1d9ec2dbed$var$updateGallery","searchMovieByQuery","currentPage","page","total_pages","catalogPaginationEl","total_results","addEventListener","$3b333e1d9ec2dbed$var$handlerLoadMoreClick","$3b333e1d9ec2dbed$var$formEl","$3b333e1d9ec2dbed$var$_elements","elements","$3b333e1d9ec2dbed$var$query","query","$3b333e1d9ec2dbed$var$queryText","queryText","$3b333e1d9ec2dbed$var$select","select","classList","placeholder","value","add","e","preventDefault","year","trim"],"version":3,"file":"catalog.cd1d4194.js.map"}