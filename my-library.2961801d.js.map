{"mappings":"ghBAAA,IAAAA,EAAAC,EAAA,S,aCAO,MAAMC,EAAO,CAClBC,eAAgBC,SAASC,cAAc,eACvCC,WAAYF,SAASC,cAAc,kBACnCE,SAAUH,SAASC,cAAc,kB,8BDKnC,MAAMG,EAAgB,IAAI,EAAAC,EAAAC,UAe1B,SAASC,IACPT,EAAKI,WAAWM,UAAY,GAC5BV,EAAKC,eAAeS,UAAY,GAChC,MAAMC,EAAcb,EAAAc,QAAQC,KAAKC,EAAAC,YAAYC,qBAClBC,QAAQN,GAAuC,IAAxBA,GAAaO,QASjEC,eAA+BR,GAK7B,IACES,EAAAC,OAAOC,SACP,MAAMC,QAAmBjB,EAAckB,gBACvCxB,EAAKI,WAAWqB,mBACd,aACA,EAAAL,EAAAM,uBAAsBf,EAAaY,G,CAErC,MAAOI,GACPC,QAAQC,IAAI,SAAUF,E,CAExBP,EAAAC,OAAOS,S,CArBLC,CAAgBpB,GAEhBX,EAAKC,eAAeS,UE/Bf,0S,CFcTD,IAGAP,SAAS8B,iBAAiB,SAASC,IAC7BA,EAAEC,OAAOC,UAAUC,SAAS,sBAC9B3B,GAAgC","sources":["src/js/pages/my-library/my-library.js","src/js/pages/my-library/refs.js","src/js/pages/my-library/markupContentTextMessage.js"],"sourcesContent":["import Storage from '../../services/local-storage';\nimport { STORAGE_KEY } from '../../events/add-remove-movie';\nimport { refs } from './refs';\nimport { markupContentTextMessage } from './markupContentTextMessage';\n\nimport { TMDB_API } from '../../api';\nimport { Loader, createMarkupMovieList } from '../../components';\n\nconst themoviedbAPI = new TMDB_API();\n\n// const PER_PAGE = 6;\n\n// const isVisibleBtnLoadMore =\n//   isVisibleMovieList && dataStorage?.length > PER_PAGE;\n\nrenderContentBasedOnConditions();\n\n//? слухач на кнопку (додавання видалення з локального сховища) для динамічного обновлення списку фільмів\ndocument.addEventListener('click', e => {\n  if (e.target.classList.contains('js-add-remove-btn'))\n    renderContentBasedOnConditions();\n});\n\nfunction renderContentBasedOnConditions() {\n  refs.moviesList.innerHTML = '';\n  refs.contentMessage.innerHTML = '';\n  const dataStorage = Storage.load(STORAGE_KEY.myLibraryMoviesList);\n  const isVisibleMovieList = Boolean(dataStorage && dataStorage?.length !== 0);\n\n  if (isVisibleMovieList) {\n    renderMovieList(dataStorage);\n  } else {\n    refs.contentMessage.innerHTML = markupContentTextMessage();\n  }\n}\n\nasync function renderMovieList(dataStorage) {\n  // if (isVisibleBtnLoadMore) {\n  //   refs.loadMore.innerHTML = markupBtnLoadMore();\n  // }\n\n  try {\n    Loader.onShow();\n    const genresList = await themoviedbAPI.getGenresList();\n    refs.moviesList.insertAdjacentHTML(\n      'beforeend',\n      createMarkupMovieList(dataStorage, genresList)\n    );\n  } catch (error) {\n    console.log('Error:', error);\n  }\n  Loader.onClose();\n}\n","export const refs = {\n  contentMessage: document.querySelector('.js-content'),\n  moviesList: document.querySelector('.js-movie-list'),\n  loadMore: document.querySelector('.js-load-more'),\n};\n","export function markupContentTextMessage() {\n  return ` \n    <div class=\"my-library-content-wrap\">\n  <p class=\"my-library-text-message\">\n    <span>OOPS...</span>\n    <span>We are very sorry!</span>\n    <span>You don’t have any movies at your library.</span>\n  </p>\n  <a class=\"button-accent\" href=\"./catalog.html\">Search movie</a>\n</div>\n    `;\n}\n"],"names":["$gsBBJ","parcelRequire","$32ff713042e80194$export$21666b427502ea6d","contentMessage","document","querySelector","moviesList","loadMore","$71d3b8b212f642f2$var$themoviedbAPI","$aEubW","TMDB_API","$71d3b8b212f642f2$var$renderContentBasedOnConditions","innerHTML","dataStorage","default","load","$jXaW1","STORAGE_KEY","myLibraryMoviesList","Boolean","length","async","$13IZK","Loader","onShow","genresList","getGenresList","insertAdjacentHTML","createMarkupMovieList","error","console","log","onClose","$71d3b8b212f642f2$var$renderMovieList","addEventListener","e","target","classList","contains"],"version":3,"file":"my-library.2961801d.js.map"}